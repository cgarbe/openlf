#!/bin/bash 
# run "greadlink" and "gdirname" instead of "readlink" and "dirname" on Mac
if [ "$(uname)" == "Darwin" ]; then
	READLINK=greadlink
	DIRNAME=gdirname
else
	READLINK=readlink
	DIRNAME=dirname
fi

# Absolute path to this script
if [ $# -eq 1 ]
then
    SCRIPT=$($READLINK -f "$1")
else
	SCRIPT=$($READLINK -f "$0")
fi


# Absolute path this script is in, thus /home/user/bin
SCRIPTPATH=$($DIRNAME "$SCRIPT")
TESTDATAPATH=$($DIRNAME "$SCRIPT")
TESTDATA2PATH=$($DIRNAME "$SCRIPT")
TESTOUTPUTPATH=$($DIRNAME "$SCRIPT")
SETTINGSPATH=$($DIRNAME "$SCRIPT")
TESTLFPATH=$($DIRNAME "$SCRIPT")

TESTLF_4D_wide=$($DIRNAME "$SCRIPT")
TESTLF_4D_high=$($DIRNAME "$SCRIPT")
TESTLF_3DH_wide=$($DIRNAME "$SCRIPT")
TESTLF_3DH_high=$($DIRNAME "$SCRIPT")
TESTLF_3DV_wide=$($DIRNAME "$SCRIPT")
TESTLF_3DV_high=$($DIRNAME "$SCRIPT")
TESTLF_CROSS_wide=$($DIRNAME "$SCRIPT")
TESTLF_CROSS_high=$($DIRNAME "$SCRIPT")
TESTLF_BUDDHA=$($DIRNAME "$SCRIPT")

SETTINGSPATH+="/tests/settings.hpp"
TESTDATAPATH+="/tests/data/"
TESTDATA2PATH+="/tests/data_2/"
TESTOUTPUTPATH+="/tests/data/output/"

TESTLFPATH+="/tests/data/test_lf/"

TESTLF_4D_wide+="/tests/data/OpenLF_testLF/4D/h7_v5_h48_w64/"
TESTLF_4D_high+="/tests/data/OpenLF_testLF/4D/h5_v7_h64_w48/"
TESTLF_3DH_wide+="/tests/data/OpenLF_testLF/3DH/h7_v1_h48_w64/"
TESTLF_3DH_high+="/tests/data/OpenLF_testLF/3DH/h5_v1_h64_w48/"
TESTLF_3DV_wide+="/tests/data/OpenLF_testLF/3DV/h1_v5_h48_w64/"
TESTLF_3DV_high+="/tests/data/OpenLF_testLF/3DV/h1_v7_h64_w48/"
TESTLF_CROSS_wide+="/tests/data/OpenLF_testLF/CROSS/h7_v5_h48_w64/"
TESTLF_CROSS_high+="/tests/data/OpenLF_testLF/CROSS/h5_v7_h64_w48/"

TESTLF_BUDDHA+="/tests/data/buddha/"

mkdir -p $TESTDATAPATH/output

echo "create settings file: $SETTINGSPATH"
touch $SETTINGSPATH

/bin/cat <<EOM >$SETTINGSPATH
#include <string>

using namespace std;

#ifndef TEST_SETTINGS_H
#define	TEST_SETTINGS_H

const string test_data_dir = "$TESTDATAPATH";
const string test_data2_dir = "$TESTDATA2PATH";
const string test_result_dir = "$TESTOUTPUTPATH";

const string test_lf_dir = "$TESTLFPATH";

const string test_lf_4D_wide = "$TESTLF_4D_wide";
const string test_lf_4D_high = "$TESTLF_4D_high";
const string test_lf_3DH_wide = "$TESTLF_3DH_wide";
const string test_lf_3DH_high = "$TESTLF_3DH_high";
const string test_lf_3DV_wide = "$TESTLF_3DV_wide";
const string test_lf_3DV_high = "$TESTLF_3DV_high";
const string test_lf_CROSS_wide = "$TESTLF_CROSS_wide";
const string test_lf_CROSS_high = "$TESTLF_CROSS_high";

const string test_lf_buddha = "$TESTLF_BUDDHA";

#endif	/* TEST_SETTINGS_H */
EOM



